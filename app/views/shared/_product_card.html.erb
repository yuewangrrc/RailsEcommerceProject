<div class="card product-card h-100">
  <img src="<%= product.image_url_or_placeholder %>" class="card-img-top product-image" alt="<%= product.name %>">
  <div class="card-body d-flex flex-column">
    <h5 class="card-title"><%= product.name %></h5>
    <p class="card-text flex-grow-1">
      <span class="badge bg-secondary"><%= product.size %></span><br>
      <%= truncate(product.description, length: 80) %>
    </p>
    <div class="mt-auto">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <span class="price h5 text-primary">$<%= product.price %></span>
        <% if product.stock > 0 %>
          <small class="text-success">In Stock</small>
        <% else %>
          <small class="text-danger">Out of Stock</small>
        <% end %>
      </div>
      <div class="d-grid gap-2">
        <%= link_to "View Details", product_path(product), class: "btn btn-outline-primary btn-sm" %>
        <% if user_signed_in? && product.stock > 0 %>
          <%= link_to "Add to Cart", add_to_cart_path(product), 
              data: { turbo_method: :post }, class: "btn btn-primary btn-sm" %>
        <% end %>
      </div>
    </div>
  </div>
</div>
